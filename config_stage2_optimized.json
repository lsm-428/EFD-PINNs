{
  "metadata": {
    "stage": "2_dynamic_response_optimized",
    "version": "2.0",
    "created_at": "2024-11-29",
    "description": "阶段2优化版：降低超调，改进动态响应",
    "goal": "将超调从38.9%降低到<15%",
    "improvements": [
      "使用二阶欠阻尼系统生成数据 (zeta=0.7)",
      "增加时间常数 5ms→8ms",
      "降低两相流约束权重",
      "提高界面稳定性约束",
      "减少早停耐心值"
    ],
    "success_criteria": {
      "response_time_t90": "1-10ms",
      "overshoot": "<15%",
      "settling_time": "<20ms",
      "causality": "no_anticipation"
    }
  },
  "model": {
    "input_dim": 62,
    "output_dim": 24,
    "hidden_dims": [256, 256, 128, 64],
    "activation": "gelu",
    "use_batch_norm": true,
    "use_residual": true,
    "dropout": 0.05
  },
  "training": {
    "epochs": 200,
    "_epochs_note": "从300降到200，配合早停",
    "batch_size": 32,
    "optimizer": "adam",
    "learning_rate": 0.001,
    "weight_decay": 1e-5,
    "lr_scheduler": "cosine",
    "warmup_epochs": 10,
    "min_lr": 1e-6,
    "early_stopping_patience": 50,
    "_early_stopping_note": "从200降到50，避免过拟合",
    "gradient_clipping": 0.5,
    "mixed_precision": true
  },
  "physics": {
    "physics_weight": 0.2,
    "_comment_weight": "保持物理权重",
    "num_physics_points": 200,
    "_comment_points": "保持物理点数量",
    "adaptive_physics_weight": true,
    "residual_weights": {
      "_comment": "=== 阶段2优化：强化稳定性，降低两相流 ===",
      
      "young_lippmann": 3.0,
      "_young_lippmann_note": "保持Young-Lippmann约束",
      
      "contact_angle_constraint": 2.0,
      "_contact_angle_note": "接触角约束",
      
      "contact_line_dynamics": 3.0,
      "_contact_line_note": "⭐ 从5.0降到3.0，减少过度响应",
      
      "interface_stability": 5.0,
      "_interface_note": "⭐ 从3.0提高到5.0，增强稳定性",
      
      "volume_conservation": 2.0,
      "_volume_note": "体积守恒",
      
      "interface_curvature": 1.0,
      "surface_tension": 1.0,
      
      "_comment_flow": "=== 流场约束（保持中等权重）===",
      "continuity": 0.5,
      "momentum_u": 0.5,
      "momentum_v": 0.5,
      "momentum_w": 0.5,
      
      "_comment_two_phase": "=== 两相流约束（大幅降低）===",
      "two_phase_continuity": 0.1,
      "_two_phase_continuity_note": "⭐ 从0.3降到0.1，减少干扰",
      "two_phase_momentum_u": 0.1,
      "_two_phase_momentum_u_note": "⭐ 从0.3降到0.1",
      "two_phase_momentum_v": 0.1,
      "two_phase_momentum_w": 0.1,
      
      "_comment_others": "=== 其他约束（低权重）===",
      "dielectric_charge": 0.1,
      "thermodynamic": 0.05,
      "frequency_response": 0.5,
      "_frequency_note": "频率响应对动态重要",
      "optical_properties": 0.01,
      "energy_efficiency": 0.01,
      "volume_consistency": 0.1,
      "ink_potential_min": 0.0,
      "ink_energy_balance": 0.05,
      
      "data_fit": 1.0
    }
  },
  "materials": {
    "_comment": "=== 真实器件材料参数 (2025-11-29 修正) ===",
    "epsilon_r": 4.0,
    "_epsilon_r_note": "SU-8介电层相对介电常数",
    "gamma": 0.072,
    "_gamma_note": "油-水界面张力 (N/m)",
    "dielectric_thickness": 0.4e-6,
    "_d_note": "介电层厚度 (m)",
    "theta0": 110.0,
    "_theta0_note": "初始接触角 (度)"
  },
  "geometry": {
    "_comment": "=== 真实器件几何参数 ===",
    "Lx": 184e-6,
    "Ly": 184e-6,
    "Lz": 20.855e-6,
    "_note": "像素尺寸 184×184×20.855 μm"
  },
  "data": {
    "use_dynamic": true,
    "_comment_dynamic": "⭐ 使用改进的动态数据生成（二阶欠阻尼）",
    "num_samples": 5000,
    "_comment_samples": "保持样本数",
    "train_ratio": 0.7,
    "val_ratio": 0.15,
    "test_ratio": 0.15,
    "normalization": "standard",
    "augmentation": false,
    "noise_level": 0.0,
    "spatial_resolution": [10, 10, 5],
    "temporal_resolution": 100,
    "time_range": [0, 0.02],
    "voltage_range": [0, 30],
    "_voltage_note": "工作电压0-30V (修正: 原0-80V过高)",
    "voltage_sequence": "step",
    "_dynamics_params": {
      "tau": "8ms (从5ms增加)",
      "zeta": "0.7 (欠阻尼)",
      "system": "二阶欠阻尼"
    }
  },
  "validation": {
    "interval": 5,
    "metrics": [
      "response_time_t90",
      "overshoot",
      "settling_time",
      "causality_check",
      "temporal_consistency"
    ],
    "save_best": true,
    "save_all_checkpoints": false
  },
  "monitoring": {
    "track_physics_residuals": true,
    "track_gradient_norms": true,
    "track_weight_distributions": true,
    "generate_diagnostic_plots": true,
    "diagnostic_interval": 10
  },
  "output": {
    "dir": "./stage2_optimized",
    "save_checkpoints": true,
    "checkpoint_interval": 20,
    "save_visualizations": true,
    "save_diagnostics": true
  },
  "seed": 42,
  "deterministic": true,
  "notes": [
    "阶段2优化版：基于第一次训练的分析结果",
    "主要改进：",
    "1. 数据生成：二阶欠阻尼系统 (zeta=0.7, tau=8ms)",
    "2. 约束权重：降低contact_line_dynamics (5.0→3.0)",
    "3. 约束权重：提高interface_stability (3.0→5.0)",
    "4. 约束权重：大幅降低两相流约束 (0.3→0.1)",
    "5. 训练策略：减少早停耐心 (200→50)",
    "预期效果：超调 38.9% → <15%"
  ]
}
