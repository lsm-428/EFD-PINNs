# æ¨¡å—æ¦‚è§ˆ (Module Overview)

æœ¬æ–‡æ¡£æä¾› EFD-PINNs é¡¹ç›®æ‰€æœ‰æ ¸å¿ƒæ¨¡å—çš„æ¦‚è§ˆå’ŒåŠŸèƒ½è¯´æ˜ã€‚

**æœ€åæ›´æ–°**: 2025-12-10

---

## ğŸ“Š æ¨¡å—æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EFD-PINNs ç³»ç»Ÿ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚    Stage 1      â”‚         â”‚    Stage 2      â”‚               â”‚
â”‚  â”‚  æ¥è§¦è§’+å¼€å£ç‡   â”‚ â”€â”€â”€â”€â”€â”€â–¶ â”‚  ä¸¤ç›¸æµ PINN    â”‚               â”‚
â”‚  â”‚  (å·²æ ¡å‡†)       â”‚  Î¸(t)   â”‚  (å·²éªŒè¯)       â”‚               â”‚
â”‚  â”‚                 â”‚ è¾¹ç•Œæ¡ä»¶ â”‚                 â”‚               â”‚
â”‚  â”‚  V â†’ Î¸(t) â†’ Î·  â”‚         â”‚  Î¸(t) â†’ Ï† â†’ Î·  â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                 â”‚
â”‚  src/models/                 src/models/                        â”‚
â”‚  aperture_model.py           pinn_two_phase.py                  â”‚
â”‚  src/predictors/             src/predictors/                    â”‚
â”‚  hybrid_predictor.py         pinn_aperture.py                   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. æ¨¡å‹æ¨¡å— (`src/models/`)

#### `aperture_model.py` â­ å·²æ ¡å‡†
**åŠŸèƒ½**: Stage 1 å¼€å£ç‡æ¨¡å‹

**ä¸»è¦ç±»**:
- `ApertureModel`: åŸºç¡€å¼€å£ç‡æ¨¡å‹
- `EnhancedApertureModel`: å¢å¼ºå¼€å£ç‡æ¨¡å‹ï¼ˆæ¨èï¼‰

**æ ¸å¿ƒåŠŸèƒ½**:
- æ¥è§¦è§’ â†’ å¼€å£ç‡æ˜ å°„ï¼ˆå·²æ ¡å‡†ï¼‰
- ç”µå®¹å˜åŒ–æ­£åé¦ˆæ•ˆåº”
- ä½“ç§¯å®ˆæ’è®¡ç®—

**æ ¡å‡†ç»“æœ**:
- 20V å¼€å£ç‡: 66.7%ï¼ˆå®éªŒå€¼ 67%ï¼Œè¯¯å·® 0.3%ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from src.models.aperture_model import EnhancedApertureModel

model = EnhancedApertureModel(config_path='config/stage6_wall_effect.json')
theta = model.get_contact_angle(20)
eta = model.contact_angle_to_aperture_ratio(theta)
print(f"20V: Î¸={theta:.1f}Â°, Î·={eta*100:.1f}%")  # 115.2Â°, 66.7%
```

#### `pinn_two_phase.py`
**åŠŸèƒ½**: Stage 2 ä¸¤ç›¸æµ PINN æ¨¡å‹

**ä¸»è¦ç±»**:
- `TwoPhasePINN`: ä¸¤ç›¸æµ PINN æ¨¡å‹
- `PhysicsLoss`: ç‰©ç†æŸå¤±è®¡ç®—
- `DataGenerator`: è®­ç»ƒæ•°æ®ç”Ÿæˆå™¨
- `Trainer`: è®­ç»ƒå™¨

**æ ¸å¿ƒåŠŸèƒ½**:
- ç›´æ¥ä½¿ç”¨ (x, y, z, t, V) ä½œä¸ºè¾“å…¥
- åˆ†ç¦» phi ç½‘ç»œå’Œé€Ÿåº¦ç½‘ç»œ
- å®Œæ•´ç‰©ç†æŸå¤±ï¼ˆè¿ç»­æ€§ + VOF + N-Sï¼‰
- æ¸è¿›å¼è®­ç»ƒç­–ç•¥
- ä¸‰æ¨¡å¼ç‰©ç†æ¨¡å‹ï¼ˆä¸­å¿ƒå¼€å£â†’å››è§’æ¶²æ»´â†’å•è§’æ¶²æ»´ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from src.models.pinn_two_phase import TwoPhasePINN, Trainer

trainer = Trainer()
trainer.train()
```

---

### 2. é¢„æµ‹å™¨æ¨¡å— (`src/predictors/`)

#### `hybrid_predictor.py`
**åŠŸèƒ½**: Stage 1 æ··åˆé¢„æµ‹å™¨ï¼ˆè§£æå…¬å¼ï¼‰

**ä¸»è¦ç±»**:
- `HybridPredictor`: æ··åˆé¢„æµ‹å™¨

**æ ¸å¿ƒåŠŸèƒ½**:
- Young-Lippmann æ–¹ç¨‹è®¡ç®—å¹³è¡¡æ¥è§¦è§’ï¼ˆå«é˜ˆå€¼ç”µå‹ï¼‰
- äºŒé˜¶æ¬ é˜»å°¼ç³»ç»Ÿæ¨¡æ‹ŸåŠ¨æ€å“åº”
- é˜¶è·ƒå“åº”ã€æ–¹æ³¢å“åº”

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from src.predictors import HybridPredictor

predictor = HybridPredictor(config_path='config/stage6_wall_effect.json')
theta = predictor.predict(voltage=20, time=0.01)
t, theta = predictor.step_response(V_start=0, V_end=20)
```

#### `pinn_aperture.py`
**åŠŸèƒ½**: Stage 2 PINN å¼€å£ç‡é¢„æµ‹å™¨

**ä¸»è¦ç±»**:
- `PINNAperturePredictor`: PINN å¼€å£ç‡é¢„æµ‹å™¨

**æ ¸å¿ƒåŠŸèƒ½**:
- åŠ è½½è®­ç»ƒå¥½çš„ TwoPhasePINN æ¨¡å‹
- é¢„æµ‹ Ï† åœº
- ä» Ï† åœºç§¯åˆ†è®¡ç®—å¼€å£ç‡

**ä½¿ç”¨ç¤ºä¾‹**:
```python
from src.predictors.pinn_aperture import PINNAperturePredictor

predictor = PINNAperturePredictor()
eta = predictor.predict(voltage=20, time=0.02)
phi_field = predictor.predict_phi_field(voltage=20, time=0.02)
```

---

### 3. ç‰©ç†æ¨¡å— (`src/physics/`)

#### `constraints.py`
**åŠŸèƒ½**: ç‰©ç†çº¦æŸè®¡ç®—

#### `data_generator.py`
**åŠŸèƒ½**: ç‰©ç†æ•°æ®ç”Ÿæˆ

---

### 4. è®­ç»ƒæ¨¡å— (`src/training/`)

#### `components.py`
**åŠŸèƒ½**: è®­ç»ƒç»„ä»¶åº“

#### `optimizer.py`
**åŠŸèƒ½**: ä¼˜åŒ–å™¨é…ç½®

---

## ğŸ“ è®­ç»ƒå…¥å£è„šæœ¬

| æ–‡ä»¶ | è¯´æ˜ | é˜¶æ®µ |
|------|------|------|
| `train_contact_angle.py` | æ¥è§¦è§’è®­ç»ƒå…¥å£ | Stage 1 |
| `train_two_phase.py` | ä¸¤ç›¸æµè®­ç»ƒå…¥å£ | Stage 2 |
| `validate_pinn_physics.py` | ç‰©ç†éªŒè¯è„šæœ¬ | é€šç”¨ |
| `visualize_pinn_results.py` | å¯è§†åŒ–è„šæœ¬ | é€šç”¨ |

---

## ğŸ“ é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| `config/stage6_wall_effect.json` | **æ ¡å‡†åçš„é…ç½®ï¼ˆæ¨èï¼‰** | âœ… |
| `config/stage1_config.json` | é˜¶æ®µ1åˆå§‹è®­ç»ƒ | âœ… |

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### Stage 1ï¼ˆæ¥è§¦è§’ + å¼€å£ç‡é¢„æµ‹ï¼‰âœ… å·²æ ¡å‡†

| æŒ‡æ ‡ | ç›®æ ‡ | å®ç° | çŠ¶æ€ |
|------|------|------|------|
| 20V å¼€å£ç‡ | 67% | 66.7% | âœ… è¯¯å·® 0.3% |
| ç¨³æ€ç²¾åº¦ (30V) | <3Â° | 0.7Â° | âœ… |
| è§’åº¦å˜åŒ– | 33Â° | 30.1Â° | âœ… |
| è¶…è°ƒ | <15% | 3.9% | âœ… |
| å“åº”æ—¶é—´ | <30ms | 13ms | âœ… |

### Stage 2ï¼ˆä¸¤ç›¸æµ PINNï¼‰âœ… å·²éªŒè¯

| ç”µå‹ | Stage 1 Î· | PINN Î· | è¯¯å·® | çŠ¶æ€ |
|------|-----------|--------|------|------|
| 0V | 0% | 0% | 0% | âœ… |
| 10V | 10.3% | 9.2% | -1.1% | âœ… |
| 20V | 66.7% | 73.6% | +6.9% | âœ… |
| 30V | 84.4% | 84.6% | +0.2% | âœ… |

**ç‰©ç†éªŒè¯**: 16/16 æµ‹è¯•ç‚¹é€šè¿‡

---

## ğŸ“Š å·²æ ¡å‡†çš„ç‰©ç†å‚æ•°

### ææ–™å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| SU-8 ä»‹ç”µå¸¸æ•° | Îµ=3.0 | ä»‹ç”µå±‚ |
| Teflon ä»‹ç”µå¸¸æ•° | Îµ=1.9 | ç–æ°´å±‚ |
| ææ€§æ¶²ä½“è¡¨é¢å¼ åŠ› | Î³=0.050 N/m | ä¹™äºŒé†‡æ··åˆæ¶² |
| é˜ˆå€¼ç”µå‹ | V_T=3V | |

### å¼€å£ç‡æ˜ å°„å‚æ•°

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| k | 0.8 | é™¡åº¦å‚æ•° |
| theta_scale | 6.0 | è§’åº¦ç¼©æ”¾å› å­ |
| alpha | 0.05 | ç”µå®¹åé¦ˆå¼ºåº¦ |
| aperture_max | 0.85 | æœ€å¤§å¼€å£ç‡ |

---

**æœ€åæ›´æ–°**: 2025-12-10
