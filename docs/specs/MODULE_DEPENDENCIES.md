# æ¨¡å—ä¾èµ–å…³ç³»

**æœ€åæ›´æ–°**: 2025-12-08

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®­ç»ƒå…¥å£è„šæœ¬                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  train_contact_angle.py     train_two_phase.py              â”‚
â”‚       (Stage 1)                  (Stage 2)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                        â”‚
             â†“                        â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ src/predictors/â”‚      â”‚ src/models/        â”‚
    â”‚ hybrid_        â”‚      â”‚ pinn_two_phase.py  â”‚
    â”‚ predictor.py   â”‚      â”‚                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” è¯¦ç»†ä¾èµ–æ ‘

### Stage 1: æ¥è§¦è§’é¢„æµ‹

```
train_contact_angle.py
    â””â”€â”€ src/predictors/hybrid_predictor.py
        â”œâ”€â”€ Young-Lippmann æ–¹ç¨‹ (è§£æ)
        â””â”€â”€ äºŒé˜¶æ¬ é˜»å°¼å“åº” (è§£æ)
```

### Stage 2: ä¸¤ç›¸æµ PINN

```
train_two_phase.py
    â””â”€â”€ src/models/pinn_two_phase.py
        â”œâ”€â”€ TwoPhasePINN (æ¨¡å‹)
        â”‚   â”œâ”€â”€ phi_net (Ï† ç½‘ç»œ)
        â”‚   â””â”€â”€ vel_net (é€Ÿåº¦ç½‘ç»œ)
        â”‚
        â”œâ”€â”€ PhysicsLoss (ç‰©ç†æŸå¤±)
        â”‚   â”œâ”€â”€ continuity_residual
        â”‚   â”œâ”€â”€ vof_residual
        â”‚   â””â”€â”€ navier_stokes_residual
        â”‚
        â”œâ”€â”€ DataGenerator (æ•°æ®ç”Ÿæˆ)
        â”‚   â””â”€â”€ src/predictors/hybrid_predictor.py
        â”‚       â””â”€â”€ è·å–æ¥è§¦è§’è¾¹ç•Œæ¡ä»¶
        â”‚
        â””â”€â”€ Trainer (è®­ç»ƒå™¨)
```

### é¢„æµ‹å™¨

```
src/predictors/pinn_aperture.py
    â””â”€â”€ src/models/pinn_two_phase.py
        â””â”€â”€ TwoPhasePINN
```

## ğŸ¯ æ•°æ®æµå‘

```
é…ç½®æ–‡ä»¶ (JSON)
    â†“
è®­ç»ƒè„šæœ¬
    â†“
æ•°æ®ç”Ÿæˆ
    â”œâ”€â”€ Stage 1: æ¥è§¦è§’ Î¸(t)
    â””â”€â”€ Stage 2: Ï† åœºè®­ç»ƒæ•°æ®
    â†“
æ¨¡å‹è®­ç»ƒ
    â”œâ”€â”€ æ•°æ®æŸå¤±
    â””â”€â”€ ç‰©ç†æŸå¤±
    â†“
ä¿å­˜æ£€æŸ¥ç‚¹
    â””â”€â”€ outputs_pinn_*/best_model.pth
```

## ğŸ“ ç›®å½•ç»“æ„

```
EFD3D/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ pinn_two_phase.py      # ä¸¤ç›¸æµ PINN
â”‚   â”‚   â”œâ”€â”€ aperture_model.py      # å¼€å£ç‡æ¨¡å‹
â”‚   â”‚   â””â”€â”€ optimized_ewpinn.py    # ä¼˜åŒ– PINN
â”‚   â”‚
â”‚   â”œâ”€â”€ predictors/
â”‚   â”‚   â”œâ”€â”€ hybrid_predictor.py    # æ··åˆé¢„æµ‹å™¨
â”‚   â”‚   â””â”€â”€ pinn_aperture.py       # PINN å¼€å£ç‡é¢„æµ‹å™¨
â”‚   â”‚
â”‚   â”œâ”€â”€ physics/
â”‚   â”‚   â”œâ”€â”€ constraints.py         # ç‰©ç†çº¦æŸ
â”‚   â”‚   â””â”€â”€ data_generator.py      # æ•°æ®ç”Ÿæˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ training/
â”‚   â”‚   â”œâ”€â”€ components.py          # è®­ç»ƒç»„ä»¶
â”‚   â”‚   â””â”€â”€ optimizer.py           # ä¼˜åŒ–å™¨
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ config.py              # é…ç½®å·¥å…·
â”‚
â”œâ”€â”€ config/
â”‚   â””â”€â”€ stage6_wall_effect.json    # æœ€ä½³é…ç½®
â”‚
â”œâ”€â”€ train_contact_angle.py         # Stage 1 å…¥å£
â”œâ”€â”€ train_two_phase.py             # Stage 2 å…¥å£
â”œâ”€â”€ visualize_pinn_results.py      # å¯è§†åŒ–
â””â”€â”€ validate_pinn_physics.py       # éªŒè¯
```

## ğŸ”— å…³é”®æ¥å£

### TwoPhasePINN

```python
# è¾“å…¥
x: torch.Tensor  # shape: (batch, 5) - (x, y, z, t, V)

# è¾“å‡º
outputs: torch.Tensor  # shape: (batch, 5) - (u, v, w, p, phi)
```

### HybridPredictor

```python
# è¾“å…¥
voltage: float  # ç”µå‹ (V)
time: float     # æ—¶é—´ (s)

# è¾“å‡º
theta: float    # æ¥è§¦è§’ (åº¦)
```

### PINNAperturePredictor

```python
# è¾“å…¥
voltage: float  # ç”µå‹ (V)
time: float     # æ—¶é—´ (s)

# è¾“å‡º
eta: float      # å¼€å£ç‡ [0, 1]
```
