# 训练报告汇总

**最后更新**: 2025-12-10

---

## 📊 当前状态

### Stage 1: 接触角 + 开口率预测 ✅ 已校准

使用解析公式 + 校准后的参数。

| 指标 | 目标 | 实现 | 状态 |
|------|------|------|------|
| 20V 开口率 | 67% | 66.7% | ✅ 误差 0.3% |
| 稳态精度 (30V) | <3° | 0.7° | ✅ |
| 角度变化 | 33° | 30.1° | ✅ |
| 超调 | <15% | 3.9% | ✅ |
| 响应时间 | <30ms | 13ms | ✅ |

### Stage 2: 两相流 PINN ✅ 已验证

最新训练: `outputs_pinn_20251210_005737`

| 电压 | Stage 1 η | PINN η | 误差 | 状态 |
|------|-----------|--------|------|------|
| 0V | 0% | 0% | 0% | ✅ |
| 10V | 10.3% | 9.2% | -1.1% | ✅ |
| 20V | 66.7% | 73.6% | +6.9% | ✅ |
| 30V | 84.4% | 84.6% | +0.2% | ✅ |

**物理验证**: 16/16 测试点通过

---

## 🎯 目标指标

### Stage 1

| 指标 | 目标 | 最佳结果 | 状态 |
|------|------|----------|------|
| 20V 开口率 | 67% | 66.7% | ✅ |
| 稳态精度 | <3° | 0.7° | ✅ |
| 角度变化 | 33° | 30.1° | ✅ |
| 超调 | <15% | 3.9% | ✅ |
| 响应时间 | <30ms | 13ms | ✅ |

### Stage 2

| 指标 | 目标 | 最佳结果 | 状态 |
|------|------|----------|------|
| V=0V 开口率 | 0% | 0% | ✅ |
| V=20V 开口率 | ~67% | 73.6% | ✅ |
| V=30V 开口率 | >80% | 84.6% | ✅ |
| 单调递增 | 是 | 是 | ✅ |
| φ 范围检查 | 通过 | 16/16 | ✅ |

---

## 📊 已校准的物理参数

### 材料参数

| 参数 | 校准前 | 校准后 | 说明 |
|------|--------|--------|------|
| γ | 0.072 N/m | **0.050 N/m** | 乙二醇混合液 |
| V_T | 5V | **3V** | 阈值电压 |
| ε_r (SU-8) | 4.0 | **3.0** | 介电层 |
| ε_h (Teflon) | - | **1.9** | 疏水层 |

### 开口率映射参数

| 参数 | 校准前 | 校准后 | 说明 |
|------|--------|--------|------|
| k | 1.0 | **0.8** | 陡度参数 |
| theta_scale | 10.0 | **6.0** | 角度缩放 |
| alpha | 0.1 | **0.05** | 电容反馈 |
| aperture_max | 0.85 | 0.85 | 最大开口率 |

---

## 🔍 分析工具

```bash
# 验证 Stage 1 校准
python -c "
from src.models.aperture_model import EnhancedApertureModel
model = EnhancedApertureModel(config_path='config/stage6_wall_effect.json')
theta = model.get_contact_angle(20)
eta = model.contact_angle_to_aperture_ratio(theta)
print(f'20V: θ={theta:.1f}°, η={eta*100:.1f}% (实验值: 67%)')
"

# 物理验证
python validate_pinn_physics.py

# 可视化 PINN 结果
python visualize_pinn_results.py

# 运行测试
python -m pytest tests/ -v
```

---

## 📁 训练输出

| 目录 | 日期 | 说明 |
|------|------|------|
| `outputs_pinn_20251210_005737` | 2025-12-10 | **最新训练（已验证）** |
| `outputs_pinn_20251208_223352` | 2025-12-08 | 历史训练 |
| `outputs_pinn_20251207_*` | 2025-12-07 | 历史训练 |
| `outputs_pinn_20251206_*` | 2025-12-06 | 历史训练 |

---

## 📈 训练历史

详细历史请参考: [../../TRAINING_HISTORY.md](../../TRAINING_HISTORY.md)

### 关键突破

1. **2025-12-01**: 数据生成器重写，使用 Young-Lippmann 方程
2. **2025-12-06**: Stage 1 → Stage 2 集成完成
3. **2025-12-08**: Stage 2 训练完成，开口率符合预期
4. **2025-12-10**: 物理参数校准，20V 开口率 66.7%（实验值 67%）
5. **2025-12-10**: Stage 2 PINN 验证通过，16/16 测试点通过

---

## 🔬 物理机制说明

### 电润湿机制

1. **电润湿作用在极性液体上**（不是油墨）
2. **极性液体铺展**，将油墨从像素中心挤向边缘/角落
3. **油墨亲疏水层**（底部 Teflon），不亲围堰壁
4. **油墨贴底收缩**，形成液滴，不会主动爬墙
5. **翻墙条件**：20V 以上油墨被挤压到极限可能翻墙

### φ 场定义（标准 VOF）

- **φ=1**: 纯油墨
- **φ=0**: 纯极性液体（透明）
- **开口率**: η = 底面 φ<0.5 的面积比例
