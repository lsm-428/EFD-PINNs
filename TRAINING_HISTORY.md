# 训练历史记录

**最后更新**: 2025-12-10

---

## 📊 训练总览

### Stage 1: 接触角预测

| 阶段 | 配置 | 角度变化 | 稳态误差 | 状态 |
|------|------|---------|---------|------|
| Stage 1-2 | 随机数据 | 1.2° | - | ❌ |
| Stage 3 | 物理数据 | 23.6° | - | ✅ 首次成功 |
| Stage 5 | 长训练 | 25.2° | 8° | ✅ |
| **Stage 6** | **像素墙效应** | **30.1°** | **0.7°** | **✅ 最佳** |
| Stage 7 | 快速动态 | 27.7° | 0.7° | ✅ |

### Stage 1: 物理参数校准 (2025-12-10)

| 参数 | 校准前 | 校准后 | 说明 |
|------|--------|--------|------|
| γ | 0.072 N/m | 0.050 N/m | 乙二醇混合液 |
| V_T | 5V | 3V | 阈值电压 |
| ε_r (SU-8) | 4.0 | 3.0 | 介电层 |
| ε_h (Teflon) | - | 1.9 | 疏水层 |
| k | 1.0 | 0.8 | 开口率陡度 |
| theta_scale | 10.0 | 6.0 | 角度缩放 |
| alpha | 0.1 | 0.05 | 电容反馈 |

**校准结果**: 20V 开口率 66.7%，实验值 67%，误差 0.3% ✓

### Stage 2: 两相流 PINN

| 日期 | 输出目录 | 开口率 (30V) | 损失 | 状态 |
|------|----------|-------------|------|------|
| 2025-12-06 | outputs_pinn_20251206_165608 | ~61% | - | ✅ |
| 2025-12-08 | outputs_pinn_20251208_223352 | ~61% | - | ✅ |
| **2025-12-10** | **outputs_pinn_20251210_005737** | **84.6%** | **7.29** | **✅ 最新** |

---

## 🎉 关键突破

### 2025-12-01: 数据生成器重写
**根本原因**: 原数据生成函数使用随机数据，不是基于物理的电润湿数据

**解决方案**: 创建 `ewp_physics_data_generator.py`，使用 Young-Lippmann 方程

**效果**: 角度变化从 1.2° 提升到 30.1°

### 2025-12-10: 物理参数校准
**目标**: 使模型预测与实验数据一致（20V→67%）

**校准内容**:
1. 材料参数：SU-8 400nm (ε=3.0) + Teflon 400nm (ε=1.9)
2. 极性液体：乙二醇混合液 (γ=0.050 N/m)
3. 阈值电压：V_T = 3V
4. 开口率映射：k=0.8, theta_scale=6.0, alpha=0.05

**效果**: 20V 开口率从 ~40% 提升到 66.7%，与实验值 67% 误差仅 0.3%

### 2025-12-10: Stage 2 PINN 验证
**训练**: 10000 epochs，最佳损失 7.29

**验证结果**:
- φ 范围检查：16/16 通过
- V=0V: η=0% ✓
- V=20V: η=73.6% (Stage 1: 66.7%)
- V=30V: η=84.6% (Stage 1: 84.4%)
- 开口率随时间增加（物理正确）✓

---

## 🏆 最佳模型

### Stage 1 (接触角 + 开口率)

**配置**: `config/stage6_wall_effect.json`

| 指标 | 目标 | 实现 | 状态 |
|------|------|------|------|
| 20V 开口率 | 67% | 66.7% | ✅ 误差 0.3% |
| 稳态精度 (30V) | <3° | 0.7° | ✅ |
| 角度变化 | 33° | 30.1° | ✅ 91% |
| 超调 | <15% | 3.9% | ✅ |
| 响应时间 | <30ms | 13ms | ✅ |

**关键改进**:
- 物理参数校准（实验验证）
- 开口率映射参数从配置文件读取
- 像素墙接触角 θ_wall=70-72°

### Stage 2 (两相流 PINN)

**输出目录**: `outputs_pinn_20251210_005737`

| 电压 | Stage 1 η | PINN η | 误差 | 状态 |
|------|-----------|--------|------|------|
| 0V | 0% | 0% | 0% | ✅ |
| 10V | 10.3% | 9.2% | -1.1% | ✅ |
| 20V | 66.7% | 73.6% | +6.9% | ✅ |
| 30V | 84.4% | 84.6% | +0.2% | ✅ |

**关键改进**:
- Stage 1 接触角作为边界条件
- 三模式物理模型（中心开口→四角液滴→单角液滴）
- 渐进式训练策略

---

## 📝 经验总结

1. **数据质量是关键** - 物理数据 vs 随机数据
2. **Young-Lippmann 方程** - 电润湿核心物理
3. **参数校准** - 必须与实验数据对比验证
4. **因果链正确性** - Stage 1 输出作为 Stage 2 边界条件
5. **渐进式训练** - 先数据后物理约束
6. **不要硬编码** - 参数应从配置文件读取

---

## 📁 配置文件

| 配置 | θ₀ | τ | ζ | γ | V_T | 说明 |
|------|-----|-----|-----|-----|-----|------|
| **stage6_wall_effect** | 120° | 5ms | 0.8 | 0.050 | 3V | **最佳（已校准）** |
| stage7_fast_dynamics | 120° | 3ms | 0.7 | 0.072 | 5V | 快速响应 |

---

**相关文档**: [CURRENT_STATUS.md](CURRENT_STATUS.md) | [PROJECT_CONTEXT.md](PROJECT_CONTEXT.md)
