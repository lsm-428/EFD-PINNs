# EFD3D项目实验计划

## 1. 实验计划概述

本文档定义了EFD3D项目的完整实验计划，旨在系统地验证和优化基于物理信息神经网络(PINN)的电磁场求解器性能。实验计划涵盖基线验证、架构优化和高级优化三个主要阶段，共计15个关键实验。

### 1.1 实验目标

- 验证62维输入→24维输出PINN模型的基础性能
- 系统性优化网络架构和训练策略
- 评估不同物理约束配置对模型精度的影响
- 建立稳定可靠的训练流程和监控机制

### 1.2 项目能力概述

- **模型架构**：支持多层感知器(MLP)的物理信息神经网络
- **输入/输出**：62维物理参数输入，24维电磁场预测输出
- **训练特性**：支持多阶段训练、自适应优化器、学习率调度
- **物理约束**：集成多种电磁场物理约束条件
- **数据处理**：支持数据增强、正则化和批量处理

## 2. 实验分类体系

### 2.1 基线实验系列

验证模型基础性能，建立性能基准线，确保基本功能正常运行。

| 实验ID | 实验名称 | 主要目标 | 关键参数 |
|--------|----------|----------|----------|
| BL001 | 标准基线验证 | 验证模型基本功能 | 默认架构，标准训练参数 |
| BL002 | 数据增强影响评估 | 验证数据增强效果 | 启用/禁用数据增强 |
| BL003 | 物理约束权重敏感性 | 确定最佳约束权重 | 不同权重配比(1.0, 0.5, 2.0) |
| BL004 | 训练稳定性测试 | 评估训练过程稳定性 | 固定随机种子，重复训练3次 |
| BL005 | 收敛速度基准 | 测量基线收敛性能 | 监控达到目标损失所需epochs |

### 2.2 架构实验系列

探索不同网络架构配置对模型性能的影响。

| 实验ID | 实验名称 | 主要目标 | 关键参数 |
|--------|----------|----------|----------|
| AR001 | 深层网络评估 | 测试更深层次网络效果 | 8层→12层，每层神经元增加25% |
| AR002 | 激活函数对比 | 比较不同激活函数 | ReLU, tanh, swish, gelu |
| AR003 | 注意力机制影响 | 评估注意力机制效果 | 启用/禁用简单注意力模块 |
| AR004 | 正则化策略优化 | 测试不同正则化方法 | L1/L2正则化，Dropout |
| AR005 | 残差连接测试 | 评估残差连接作用 | 添加残差连接，比较性能 |

### 2.3 优化实验系列

系统性调优训练策略和超参数配置。

| 实验ID | 实验名称 | 主要目标 | 关键参数 |
|--------|----------|----------|----------|
| OP001 | 学习率策略优化 | 测试不同学习率调度 | 线性衰减，余弦退火，周期性重启 |
| OP002 | 批量大小影响 | 确定最佳批量大小 | 16, 32, 64, 128 |
| OP003 | 多阶段训练验证 | 测试阶段式训练效果 | 预热阶段，主体训练，精细调优 |
| OP004 | 混合精度训练 | 评估计算效率提升 | FP32 vs. FP16 |
| OP005 | 自适应权重优化 | 测试动态权重调整 | 使用LossStabilizer类 |

## 3. 实验详细配置

### 3.1 基线实验配置

基线实验使用标准配置，确保可重复性和稳定性：

```json
{
  "metadata": {
    "version": "1.0",
    "description": "基线实验配置",
    "created_at": "2025-11-26",
    "experiment_type": "baseline"
  },
  "model": {
    "input_dim": 62,
    "output_dim": 24,
    "hidden_layers": [128, 256, 256, 128],
    "activation": "relu",
    "use_attention": false,
    "residual_connections": false
  },
  "training": {
    "epochs": 1000,
    "batch_size": 32,
    "optimizer": "adam",
    "loss_weights": {
      "data": 1.0,
      "physics": 1.0
    }
  }
}
```

### 3.2 架构实验配置

深层网络架构实验配置示例：

```json
{
  "metadata": {
    "version": "1.0",
    "description": "深层网络架构实验",
    "created_at": "2025-11-26",
    "experiment_type": "architecture"
  },
  "model": {
    "input_dim": 62,
    "output_dim": 24,
    "hidden_layers": [160, 320, 320, 320, 320, 160],
    "activation": "relu",
    "use_attention": true,
    "residual_connections": true
  },
  "training": {
    "epochs": 1200,
    "batch_size": 32,
    "optimizer": "adam"
  }
}
```

## 4. 实验执行时间表

### 4.1 阶段一：基线验证（4天）

- **目标**：建立稳定基线，验证基础功能
- **时间安排**：
  - 第1天：执行BL001标准基线验证
  - 第2天：执行BL002数据增强影响评估和BL003物理约束权重敏感性
  - 第3天：执行BL004训练稳定性测试
  - 第4天：执行BL005收敛速度基准，分析基线结果

### 4.2 阶段二：架构优化（5天）

- **目标**：系统性优化网络架构
- **时间安排**：
  - 第5-6天：执行AR001深层网络评估和AR002激活函数对比
  - 第7天：执行AR003注意力机制影响
  - 第8天：执行AR004正则化策略优化
  - 第9天：执行AR005残差连接测试，分析架构结果

### 4.3 阶段三：高级优化（5天）

- **目标**：精细调优训练策略和超参数
- **时间安排**：
  - 第10-11天：执行OP001学习率策略优化和OP002批量大小影响
  - 第12天：执行OP003多阶段训练验证
  - 第13天：执行OP004混合精度训练
  - 第14天：执行OP005自适应权重优化，生成最终报告

## 5. 实验监控和评估

### 5.1 监控指标

- **主要指标**：
  - 数据损失（MSE）
  - 物理约束损失
  - 总损失
  - 验证准确率
- **次要指标**：
  - 训练时间/epoch
  - GPU内存使用
  - 梯度范数
  - 学习率变化

### 5.2 报告生成

每个实验完成后自动生成报告，包含：
- 实验配置摘要
- 训练历史可视化
- 性能指标对比
- 最佳模型检查点信息

### 5.3 成功标准

- 基线实验：数据损失低于0.01，物理约束损失稳定
- 架构实验：与基线相比性能提升>10%或训练速度提升>15%
- 优化实验：与最佳架构相比性能再提升>5%或资源使用降低>20%

## 6. 实验执行脚本

使用`run_experiment_plan.py`执行实验计划：

```bash
# 执行单个实验
python scripts/run_experiment_plan.py --config experiments/configs/baseline_experiment.json

# 执行整个实验系列
python scripts/run_experiment_plan.py --series baseline

# 执行完整实验计划
python scripts/run_experiment_plan.py --full-plan
```

## 7. 风险与缓解策略

| 风险 | 可能性 | 影响 | 缓解策略 |
|------|--------|------|----------|
| 训练不稳定 | 中 | 高 | 使用LossStabilizer，增加梯度裁剪 |
| 过拟合 | 高 | 中 | 增强正则化，数据增强，早停机制 |
| 物理约束冲突 | 中 | 高 | 调整约束权重，使用自适应权重机制 |
| 计算资源不足 | 低 | 高 | 混合精度训练，批量大小调整 |

## 8. 结论与后续步骤

完成实验后，将基于结果：
1. 确定最佳模型架构和训练策略
2. 建立模型性能基准和评估标准
3. 识别进一步优化的方向
4. 为生产部署做准备

---

*实验计划版本：1.0*
*创建日期：2025-11-26*
*最后更新：2025-11-26*